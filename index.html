<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Tigger</title>
  
    <link rel="icon" href="/assets/logo.png">
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url(/assets/header.png)">
        <div class='av-pic' style="background-image: url(/assets/logo.png)">
        </div>
    </section>
    <section class='menu'>
        <div>Tigger</div>
        
            <div>åŸåŠ›æ¢ç´¢</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>é¦–é¡µ</li>
            </a>
          
            <a href="/archives/" class="Btn">
              <li>å½’æ¡£</li>
            </a>
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>
          
            <a href="/categories/" class="Btn">
              <li>Categories</li>
            </a>
          
        </ul>
    </section>
    <section class="media">
        
            
                <a href="https://github.com/wanbei" target="_blank" rel="noopener">
                    <img src="/assets/github.svg" />
                </a>
            
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/12/15/react-redux/">React Redux 1.0.0</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-12-15T01:49:15.829Z" itemprop="datePublished">
    2020-12-15
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/React-Redux/">React Redux</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Redux/">Redux</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/React-js/">React.js</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <a style="border-bottom: 0" href="https://pic4.zhimg.com/v2-b0f037c953c4aff17a871d0e6cb4079a_r.jpg" target="_blank">
<img src="https://pic4.zhimg.com/v2-b0f037c953c4aff17a871d0e6cb4079a_r.jpg" alt="Nest.js-è„‘å›¾">
</a>


      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/12/04/Sequelize-ORM/">Sequelize ORM</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-12-04T05:20:45.426Z" itemprop="datePublished">
    2020-12-04
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Node-js/">Node.js</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Nest-js/">Nest.js</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/Node-js/">Node.js</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <a style="border-bottom: 0" href="https://pic1.zhimg.com/v2-fc84411deb512170785d0e3b88fcaa6f_r.jpg" target="_blank">
<img src="https://pic3.zhimg.com/v2-daac1ed406d9a8ce424f5ce16d189db6_r.jpg" alt="Sequelize ORM">
</a>



      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/12/04/Nest.js/">Nest.js-å­¦ä¹ è„‘å›¾</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-12-04T02:52:54.601Z" itemprop="datePublished">
    2020-12-04
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Node-js/">Node.js</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Nest-js/">Nest.js</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/Node-js/">Node.js</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <a style="border-bottom: 0" href="https://pic1.zhimg.com/v2-ac13978c1663728f06e4e759d38473ec_r.jpg" target="_blank">
<img src="https://pic1.zhimg.com/v2-ac13978c1663728f06e4e759d38473ec_r.jpg" alt="Nest.js-è„‘å›¾">
</a>


      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/12/04/Message/">Message-ç»„ä»¶è„‘å›¾</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-12-04T02:45:17.096Z" itemprop="datePublished">
    2020-12-04
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/React/">React</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/%E7%BB%84%E4%BB%B6/">ç»„ä»¶</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/JavaScript/">JavaScript</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <a style="border-bottom: 0" href="https://pic1.zhimg.com/v2-fc84411deb512170785d0e3b88fcaa6f_r.jpg" target="_blank">
<img src="https://pic1.zhimg.com/v2-fc84411deb512170785d0e3b88fcaa6f_r.jpg" alt="Message-ç»„ä»¶è„‘å›¾">
</a>


      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/05/28/%E9%86%8D%E9%86%90%E7%81%8C%E9%A1%B6/">é†é†çŒé¡¶</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-05-28T02:09:19.227Z" itemprop="datePublished">
    2020-05-28
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E9%86%8D%E9%86%90%E7%81%8C%E9%A1%B6/">é†é†çŒé¡¶</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/%E9%86%8D%E9%86%90%E7%81%8C%E9%A1%B6/">é†é†çŒé¡¶</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p><a href="https://agda-zh.github.io/PLFA-zh/" target="_blank" rel="noopener">ç¼–ç¨‹è¯­è¨€åŸºç¡€ï¼šAgda è¯­è¨€æè¿°</a><br><a href="https://www.seas.upenn.edu/~sweirich/ssgip/" target="_blank" rel="noopener">Generic programming with Dependent Types</a></p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/05/27/%E5%A6%82%E4%BD%95%E7%94%A8TypeScript%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%B3%9B%E5%9E%8B%E7%AE%97%E6%B3%95/">å¦‚ä½•ç”¨TypeScriptå®ç°ä¸€ä¸ªæ³›å‹ç®—æ³•</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-05-27T14:56:35.499Z" itemprop="datePublished">
    2020-05-27
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E7%AE%97%E6%B3%95/">ç®—æ³•</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/%E6%B3%9B%E5%9E%8B/">æ³›å‹</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/JavaScript/">JavaScript</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p><img src="https://s1.ax1x.com/2020/05/28/tV7YrV.png" alt="tV7YrV.png"></p>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªä»»åŠ¡å¼€å§‹å§ã€‚æ ¹æ® div å…ƒç´  data-idx å±æ€§çš„å€¼å±•ç¤ºå¯¹åº”çš„æ–‡æ¡ˆã€‚data-idx çš„å€¼ä» -1 å¼€å§‹ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨äº†æ•°ç»„å­˜æ”¾æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨ data-idx æ—¶ç»™å®ƒåŠ  1 ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p>HTMLï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">data-idx</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>JavaScriptï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Copywriter = [</span><br><span class="line">    <span class="string">"joybuy.com"</span>,</span><br><span class="line">    <span class="string">"jd.ru"</span>,</span><br><span class="line">    <span class="string">"jd.th"</span>,</span><br><span class="line">    <span class="string">"jd.id"</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> $dom = <span class="built_in">document</span>.querySelector(<span class="string">"#demo"</span>)</span><br><span class="line"><span class="keyword">const</span> idx = $dom.getAttribute(<span class="string">"data-idx"</span>)</span><br><span class="line"></span><br><span class="line">$dom.innerHTML = Copywriter[idx + <span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p><code>div#demo</code> å…ƒç´ ä¸­çš„æ–‡æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ²¡é”™ï¼Œ<code>undefined</code>ï¼</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">data-idx</span>=<span class="string">"1"</span>&gt;</span>undefined<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å› ä¸º <code>getAttribute()</code> æ–¹æ³•è¿”å›çš„æ˜¯ string ç±»å‹çš„å€¼ï¼Œåœ¨JavaScriptä¸­åªèƒ½ç”¨æ•´æ•°ä½œä¸ºæ•°ç»„å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸èƒ½ç”¨å­—ç¬¦ä¸²ã€‚<code>Copywriter[idx + 1]</code> çš„æœ¬æ„æ˜¯è¿”å›æ•°ç»„ä¸­ä¸‹æ ‡ä¸º <code>x + 1</code> çš„å…ƒç´ ã€‚åœ¨æœ¬ä¾‹ä¸­æˆ‘ä»¬æœŸæœ›<code>x + 1 = 2</code>ä½†æ˜¯å®ƒå®é™…çš„ç»“æœæ˜¯å­—ç¬¦ä¸²<code>11</code>ã€‚åœ¨ä»£ç è¿è¡Œæ—¶ä¼šå°†å­—ç¬¦ä¸²<code>11</code>è½¬æ¢ä¸ºæ•´æ•°å¹¶ä½œä¸ºç´¢å¼•å€¼ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰§è¡Œåçš„ç»“æœä¾¿æ˜¯<code>undefined</code>ã€‚</p>
<p>ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¹‹æ‰€ä»¥äº§ç”Ÿé—®é¢˜ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰è®¤è¯†åˆ° <code>getAttribute()</code> æ–¹æ³•è¿”å›çš„æ˜¯ stringã€‚ä¸ºäº†è®©ä»£ç æ­£ç¡®è¿è¡Œï¼Œéœ€è¦å¯¹ idx è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$dom.innerHTML = Copywriter[<span class="built_in">Number</span>(idx) + <span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢ç¤ºä¾‹æˆ‘ä»¬å¯ä»¥å‘ç° Bug æ˜¯åœ¨ç¨‹åºè¿è¡Œé˜¶æ®µæš´éœ²çš„ï¼Œè¿™æ˜¯å› ä¸º Javascript æ˜¯åŠ¨æ€å¤šç±»å‹è¯­è¨€ï¼Œç±»å‹æ£€æŸ¥å‘ç”Ÿåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ã€‚<br>TypeScript çš„é™æ€ç±»å‹æ£€æŸ¥å…è®¸æˆ‘ä»¬åœ¨ç¨‹åºè¿è¡Œä¹‹å‰å°±å¯ä»¥ç¡®å®šæˆ‘ä»¬æ‰€è®¾å®šçš„ç¡®å®šæ€§æ˜¯å¦æ˜¯å¯¹çš„ã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°ä»£ç ä¿å­˜åˆ° <code>.ts</code> çš„æ–‡ä»¶ä¸­ï¼Œç„¶åè§‚å¯Ÿä¸€ä¸‹ï¼š</p>
<p><img src="https://s1.ax1x.com/2020/06/04/tBhOsJ.png" alt="tBhOsJ.png"></p>
<p>é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥çœ‹åˆ° TypeScript é™æ€ç±»å‹æ£€æŸ¥å¸¦ç»™æˆ‘ä»¬çš„å¥½å¤„ï¼ˆä½¿ç”¨é™æ€ç±»å‹æ£€æŸ¥çš„å¥½å¤„å¯ä»¥æŸ¥çœ‹ï¼š<a href="https://www.freecodecamp.org/news/why-use-static-types-in-javascript-part-1-8382da1e0adb/" target="_blank" rel="noopener">Why use static types in JavaScript</a>ï¼‰ï¼Œ<br>æœ‰äº† TypeScript çš„é™æ€ç±»å‹ï¼Œæˆ‘ä»¬å°±éœ€è¦ä» JavaScript åŠ¨æ€ç±»å‹çš„æ€ç»´æ¨¡å¼è½¬æ¢åˆ° TypeScript é™æ€ç±»å‹çš„æ€ç»´æ¨¡å¼ã€‚</p>
<p><img src="https://s1.ax1x.com/2020/06/01/tJXrpF.png" alt="tJXrpF.png"></p>
<p>åœ¨ã€ŠCè¯­è¨€éå¸¸é“ã€‹ä¸€ä¹¦ä¸­ï¼Œä½œè€…åœ¨å‰è¨€éƒ¨åˆ†å†™åˆ°ï¼šâ€å­¦ä¹  C è¯­è¨€çš„è¯€çªåœ¨å“ªé‡Œå‘¢ï¼Ÿé¦–å…ˆï¼ŒæŒæ¡å®ƒçš„ç±»å‹ç³»ç»Ÿå¹¶å­¦ä¼šä»¥ç±»å‹çš„è§‚ç‚¹æ¥æ„é€ å’Œè§£æç¨‹åºä¸­çš„ä»£ç ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šè¿·è·¯ã€‚å¦‚æœä½ æ²¡æœ‰æŒæ¡ C è¯­è¨€çš„ç±»å‹ç³»ç»Ÿï¼Œä¸ä¼šä»ç±»å‹çš„è§’åº¦æ¥åˆ†æä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¯´æ˜ä½ å¹¶æ²¡æœ‰æŒæ¡ C è¯­è¨€â€ã€‚<br>å¯¹äº TypeScript æ¥è¯´ï¼Œéœ€è¦æŒæ¡ TypeScript æ‰€æ”¯æŒçš„ç±»å‹ç³»ç»Ÿï¼Œå¹¶ä»¥ç±»å‹çš„è§‚ç‚¹æ¥ç¼–å†™ Typescript ç¨‹åºï¼ˆç”±äº Typescript æ˜¯ JavaScript çš„è¶…é›†ï¼Œä½ å½“ç„¶ä¹Ÿå¯ä»¥ä¸ç”¨é™æ€ç±»å‹çš„è§‚å¿µæ¥ç¼–å†™ç¨‹åºï¼‰ã€‚</p>
<p>TypeScript ä¸­æä¾›äº†æ³›å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå’Œç±»å‹å¯†åˆ‡ç›¸å…³çš„æ¦‚å¿µï¼Œæ¥ä¸‹é‡Œæˆ‘ä»¬å°†ä»ä¸€ä¸ª JavaScript ç¼–å†™çš„ find å‡½æ•°å¼€å§‹ï¼Œç„¶åé€šè¿‡å®ä¾‹çš„æ–¹å¼è¯´æ˜æ³›å‹çš„æ¦‚å¿µã€‚</p>
<p>å‡½æ•° <code>find()</code> ï¼šä»æ¯ä¸ªå…ƒç´ å‡ä¸º number ç±»å‹çš„æ•°ç»„ä¸­æŸ¥æ‰¾ä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«è¯¥å€¼çš„æ•°ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">source, expect</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> filtered = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> idx = <span class="number">0</span>; idx &lt; source.length; idx++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(source[idx] == expect) &#123;</span><br><span class="line">            filtered.push(source[idx])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filtered</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬å°†åˆ¤å®šæ¡ä»¶å›ºå®šä¸º <code>==</code>ï¼Œè€ƒè™‘åˆ°æŸ¥æ‰¾çš„å¯èƒ½ä¼šæœ‰å¤šç§ï¼ˆå°äºã€å¤§äº..ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦é‡æ„æ­¤æ–¹æ³•ï¼Œè®©å®ƒå¯ä»¥æ”¯æŒå¤šç§åŒ¹é…æ¡ä»¶ã€‚ä¸€ä¸ªè§£å†³åŠæ³•æ˜¯å°†åˆ¤å®šæ¡ä»¶æ›¿æ¢ä¸º functionï¼Œæ­¤ function å§‹ç»ˆè¿”å› boolean ç±»å‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">source, expect, filter</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> filtered = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> idx = <span class="number">0</span>; idx &lt; source.length; idx++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(filter(source[idx], expect)) &#123;</span><br><span class="line">            filtered.push(source[idx])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filtered</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨çš„ find å‡½æ•°é€‚ç”¨èŒƒå›´æ¯”ä¹‹å‰å¤§äº†ä¸€äº›ã€‚é™¤äº†é€‚åº”å„é¡¹å…ƒç´ å‡ä¸º number çš„æ•°ç»„ï¼Œä¹ŸåŒæ ·é€‚ç”¨äºå„é¡¹å…ƒç´ å‡ä¸º string çš„æ•°ç»„ã€‚<br>æ¥ä¸‹æ¥çš„ä»»åŠ¡æ˜¯å°†ä¸Šé¢çš„ find å‡½æ•°ä½¿ç”¨ TypeScript æ”¹å†™ã€‚é‚£æˆ‘ä»¬è¦åšçš„äº‹æƒ…æ˜¯ç»™å‚æ•°ã€è¿”å›å€¼ã€å‡½æ•°ä½“å†…çš„å˜é‡å¢åŠ ç±»å‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function find(source:number[], expect:number, filter:(a:number, b:number)=&gt;boolean):number[] &#123;</span><br><span class="line">    <span class="keyword">let</span> filtered:number[] = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> idx:number = <span class="number">0</span>; idx &lt; source.length; idx++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(filter(source[idx], expect)) &#123;</span><br><span class="line">            filtered.push(source[idx])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filtered</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">function find_string(source:string[], expect:string, filter:(a:string, b:string)=&gt;boolean):string[] &#123;</span><br><span class="line">    <span class="keyword">let</span> filtered:string[] = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> idx:number = <span class="number">0</span>; idx &lt; source.length; idx++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(source[idx].indexOf(expect) != <span class="number">-1</span>) &#123;</span><br><span class="line">            filtered.push(source[idx])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filtered</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†è®© find æ”¯æŒ number ç±»å‹çš„æ•°ç»„å’Œ string ç±»å‹çš„æ•°ç»„ï¼Œæˆ‘ä»¬å®ç°äº†ä¸¤ä¸ªå‡½æ•°ã€‚ç„¶è€Œï¼Œ<br>åœ¨æœ€å¼€å§‹çš„å®ç°ä¸­æˆ‘ä»¬åªæä¾›äº†ä¸€ä¸ª find å‡½æ•°ï¼Œå¯æ˜¯ä¸Šé¢çš„å®ç°ä¸­ç¡®æœ‰ä¸¤ä¸ªä¸åŒåç§°çš„å®ç°äº† find åŠŸèƒ½çš„å‡½æ•°ã€‚å‡å¦‚è¦å¢åŠ å¯¹å„é¡¹å…ƒç´ å‡ä¸º boolean æ•°ç»„çš„æ”¯æŒï¼Œé‚£æˆ‘ä»¬è¿˜éœ€è¦å®ç°ä¸€ä¸ªåä¸º find_boolean çš„å‡½æ•°ã€‚æˆ‘ä»¬å¹¶ä¸æƒ³ç»™æ¯ç§ç±»å‹å®ç°ä¸€ä¸ª find å‡½æ•°ï¼Œæˆ‘ä»¬è¦åƒåˆšå¼€å§‹é‚£æ ·ï¼Œåªæä¾›åä¸º find çš„å‡½æ•°ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€šè¿‡å‡½æ•°é‡è½½æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å®šä¹‰é‡è½½çš„æ—¶å€™ï¼Œä¸€å®šè¦æŠŠæœ€ç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨æœ€å‰é¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è½½åˆ—è¡¨</span></span><br><span class="line">function find(source:string[], expect:string, filter:(a:string, b:string)=&gt;boolean):string[];</span><br><span class="line">function find(source:number[], expect:number, filter:(a:number, b:number)=&gt;boolean):number[];</span><br><span class="line"><span class="comment">// ä¸æ˜¯é‡è½½åˆ—è¡¨çš„ä¸€éƒ¨åˆ†</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">source:any, expect:any, filter:any</span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> expect === <span class="string">"number"</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> filtered:number[] = []</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> idx:number = <span class="number">0</span>; idx &lt; source.length; idx++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(filter(source[idx], expect)) &#123;</span><br><span class="line">                filtered.push(source[idx])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> filtered</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> expect === <span class="string">"string"</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> filtered:string[] = []</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> idx:number = <span class="number">0</span>; idx &lt; source.length; idx++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(filter(source[idx], expect)) &#123;</span><br><span class="line">                filtered.push(source[idx])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> filtered</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ typeof è¿ç®—ç¬¦å°† expect å‚æ•°çš„ç±»å‹æ”¶çª„ï¼Œå¹¶é’ˆå¯¹æ¯ç§ç±»å‹ç¼–å†™äº†å®ç°é€»è¾‘ã€‚ä½†æ˜¯å®ç°é€»è¾‘å¤§åŒå°å¼‚ï¼Œç›®å‰çœ‹æ¥ä»…ä»…æ˜¯ç±»å‹ä¸ä¸€è‡´ã€‚å¯¹æ­¤æˆ‘ä»¬æœ‰å¦‚ä¸‹æƒ³æ³•ï¼š</p>
<ul>
<li>æ¶ˆé™¤æ‰‹å·¥ç¼–å†™çš„ç±»å‹æ”¶çª„ä»£ç </li>
<li>å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æŒ‡å®šå‡½æ•°æ‰€æ”¯æŒçš„ç±»å‹</li>
<li>ä¸æ¶ˆå‡é™æ€ç±»å‹æ£€æŸ¥å¸¦æ¥çš„æ”¶ç›Š</li>
</ul>
<p>ä¸Šé¢çš„æƒ³æ³•å¯ä»¥ä½¿ç”¨æ³›å‹æ¥å®ç°ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ³›å‹æ”¹å†™æ­¤æ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function find&lt;T&gt;(source:T[], expect:T, filter:(a:T, b:T)=&gt;boolean): T[] &#123;</span><br><span class="line">    <span class="keyword">let</span> filtered:T[] = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> idx:number = <span class="number">0</span>; idx &lt; source.length; idx++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(filter(source[idx], expect)) &#123;</span><br><span class="line">            filtered.push(source[idx])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filtered</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨ find å‡½æ•°:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find&lt;number&gt;<span class="function">(<span class="params">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="number">2</span>, (a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a == b</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„å®ç°ä¸­å‚æ•° source æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶å„é¡¹ç±»å‹å‡ä¸º Tï¼ŒT å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨æ—¶æŒ‡å®šå…·ä½“ç±»å‹åç§°ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¤„ç†åŒ…å«ä»»æ„ç±»å‹çš„æ•°ç»„ã€‚å¯¹äºæ•°ç»„ source æˆ‘ä»¬ä½¿ç”¨ for å¾ªç¯æ¥å¤„ç†ã€‚å‡å¦‚ source æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œå…¶å€¼æ˜¯ <code>{a: 1, b: 2, c: 3}</code> æˆ–è€… <code>{d: 4, e: 5, f:6}</code> ç­‰ç­‰ï¼Œæˆ‘ä»¬åº”è¯¥æ€æ ·å¤„ç†å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>for...in</code> å¯¹å…¶è¿›è¡Œéå†ã€‚å‡å¦‚ source æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€å¯æšä¸¾å¯¹è±¡ï¼Œç”šè‡³æ˜¯ä»»æ„å¯¹è±¡ï¼Œæˆ‘ä»¬è¯¥æ€æ ·å¤„ç†å‘¢ï¼Ÿæ‹¿å•å‘é“¾è¡¨æ¥è¯´ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨ <code>while</code> å¾ªç¯éå†æ•°æ®å¹¶å¤„ç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(currentNode) &#123;</span><br><span class="line">    <span class="keyword">if</span>(currentNode.value == expect) &#123;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">    currentNode = currentNode.next</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»»æ„çš„æ•°ç»„ã€å¯¹è±¡ã€å•å‘é“¾è¡¨ä¸­æŸ¥æ‰¾æ•°æ®æ€»æ˜¯è¦ä¾èµ–éå†ï¼Œè€Œä¸”å®ƒä»¬æœ‰å„è‡ªçš„å¾ªç¯éå†æ–¹å¼ï¼Œæˆ‘ä»¬è¦åœ¨å‡½æ•°çš„å…·ä½“å®ç°ä¸­ç¼–å†™å„ç§ç±»å‹æ ¡éªŒï¼Œç”¨ä»¥æŒ‡å®šå¾ªç¯å¤„ç†æ–¹æ³•ã€‚æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å°†æ•°æ®çš„å¾ªç¯éå†è¿›è¡ŒæŠ½è±¡ï¼Œç”¨ç»Ÿä¸€çš„æ–¹å¼æ¥è¡¨è¾¾å¾ªç¯éå†å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>è¿­ä»£å™¨</code>ã€‚è¿­ä»£å™¨å…è®¸æˆ‘ä»¬éå†å¯¹è±¡ï¼Œä½†æ— é¡»å…³æ³¨å¯¹è±¡å†…éƒ¨æ•°æ®çš„ç»„ç»‡æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºæ•°æ®æ˜¯çº¿æ€§çš„è¿˜æ˜¯ç¦»æ•£çš„æˆ‘ä»¬éƒ½å¯ä»¥éå†ã€‚</p>
<p><img src="https://s1.ax1x.com/2020/06/01/tJHMn0.png" alt="tJHMn0.png"></p>
<p>é€šè¿‡ä½¿ç”¨è¿­ä»£å™¨æˆ‘ä»¬è¿˜å¯ä»¥å°†æ•°æ®ç»“æ„å’Œç®—æ³•åˆ†ç¦»ï¼Œæ¯”å¦‚ C++ çš„ STLï¼ˆæ ‡å‡†æ¨¡ç‰ˆåº“ï¼‰ æ‰€æä¾›çš„ç»„ä»¶å…¶å…ƒç´ å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¹¶å€ŸåŠ©è¿­ä»£å™¨å°†æ•°æ®ç»“æ„å’Œç®—æ³•åˆ†ç¦»ï¼Œä»è€Œè·å¾—å…·æœ‰é€šç”¨æ€§çš„ç¨‹åºç»„ä»¶ã€‚å¯¹äº find å‡½æ•°è€Œè¨€ï¼Œæ•°æ®ç»“æ„æ˜¯æŒ‡ source å…·ä½“çš„å€¼ç±»å‹ï¼Œç®—æ³•å³ filter å‡½æ•°å†…éƒ¨çš„æ•°æ®å¤„ç†é€»è¾‘ã€‚</p>
<p><img src="https://s1.ax1x.com/2020/06/01/tJbUPg.png" alt="tJbUPg.png"></p>
<p>åœ¨ JavaScript ä¸­å¯ä»¥é€šè¿‡ <code>Symbol.iterator</code> ä¸ºæ¯ä¸ªå¯¹è±¡å®šä¹‰é»˜è®¤çš„è¿­ä»£å™¨ï¼Œä½¿å…¶æˆä¸ºå¯è¿­ä»£å¯¹è±¡ï¼Œé…åˆ <code>for...of</code> å®ç°æ•°æ®ä¸ç®—æ³•çš„åˆ†ç¦»ã€‚<code>for...of</code> è¯­å¥å¯åœ¨è¿­ä»£å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªè¿­ä»£å¾ªç¯ï¼Œè°ƒç”¨è‡ªå®šä¹‰çš„<code>Symbol.iterator</code>ã€‚</p>
<p><img src="https://s1.ax1x.com/2020/06/05/tsmBTO.png" alt="tsmBTO.png"></p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Symbol.iterator</code> ç»™ LinkedList å®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½¿å…¶æˆä¸ºå¯è¿­ä»£å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰èŠ‚ç‚¹ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkedListNode</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    data:T</span><br><span class="line">    next:LinkedListNode&lt;T&gt;|<span class="literal">null</span></span><br><span class="line">    <span class="keyword">constructor</span>(data:T) &#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    head:LinkedListNode&lt;T&gt;|<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.head = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    add(data:T) &#123;</span><br><span class="line">        <span class="keyword">const</span> newNode:LinkedListNode&lt;T&gt; = <span class="keyword">new</span> LinkedListNode&lt;T&gt;(data);</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.head === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.head = newNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    </span><br><span class="line">            <span class="keyword">let</span> current = <span class="keyword">this</span>.head;</span><br><span class="line">    </span><br><span class="line">            <span class="keyword">while</span> (current.next !== <span class="literal">null</span>) &#123;</span><br><span class="line">                current = current.next;</span><br><span class="line">            &#125;</span><br><span class="line">            current.next = newNode;            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    *values()&#123;</span><br><span class="line">        <span class="keyword">let</span> current = <span class="keyword">this</span>.head;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (current !== <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">yield</span> current.data;</span><br><span class="line">            current = current.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.values();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> list = <span class="keyword">new</span> LinkedList&lt;number&gt;()</span><br><span class="line">list.add(<span class="number">0</span>)</span><br><span class="line">list.add(<span class="number">1</span>)</span><br><span class="line">list.add(<span class="number">2</span>)</span><br><span class="line">list.add(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> list) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä½¿ç”¨äº† <code>function*</code> ç”Ÿæˆå™¨å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ª <code>Generator</code> å¯¹è±¡ï¼Œå¹¶ä¸” <code>Generator</code> å¯¹è±¡ç¬¦åˆ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols#iterable" target="_blank" rel="noopener">å¯è¿­ä»£åè®®</a>å’Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols#iterator" target="_blank" rel="noopener">è¿­ä»£å™¨åè®®</a>ã€‚ä¹Ÿå°±æ˜¯è¯´ <code>[Symbol.iterator]()</code> è¿”å›ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚</p>
<p>åœ¨äº†è§£äº†è¿­ä»£å™¨ã€è¿­ä»£å™¨ä½œç”¨ã€è¿­ä»£å™¨å®ç°åï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ find æ–¹æ³•ï¼Œä½¿å®ƒèƒ½é…åˆè¿­ä»£å™¨å¤„ç†æ•°æ®ï¼Œå¹¶è®©å…¶å¯æ”¯æŒæ›´å¤šç±»å‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">interface Iterable&lt;T&gt; &#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.iterator](): IterableIterator&lt;T&gt;;</span><br><span class="line">&#125;</span><br><span class="line">function find&lt;T extends Iterable&lt;E&gt;, E&gt;(source:T, expect:E, filter:(a:E, b:E)=&gt;boolean): E[] &#123;</span><br><span class="line">    <span class="keyword">let</span> filtered:E[] = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> source) &#123;</span><br><span class="line">        <span class="keyword">if</span>(filter(item, expect)) &#123;</span><br><span class="line">            filtered.push(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filtered</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params">a:number, b:number</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &lt;= b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">find&lt;LinkedList&lt;number&gt;,number&gt;(list, <span class="number">1</span>, filter)</span><br></pre></td></tr></table></figure>



<p>TypeScript çš„ç±»å‹ç³»ç»Ÿæ˜¯<a href="https://zhuanlan.zhihu.com/p/64446259" target="_blank" rel="noopener">ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿ</a>ï¼Œ<code>interface</code> ä¸»è¦æ˜¯ç”¨æ¥æè¿°ç±»å‹çš„å½¢çŠ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ç±»å‹æ‰€å…·æœ‰çš„ç‰¹å¾ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>interface</code> å¯¹æ³›å‹ T åšå‡ºçº¦æŸï¼Œè¦æ±‚å…¶å¿…é¡»å…·å¤‡ <code>Iterable</code> æ‰€å…·æœ‰çš„ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ find å‡½æ•°é€‚ç”¨äºæ‰€æœ‰å¸¦æœ‰è¿­ä»£å™¨çš„æ•°æ®ã€‚å¯¹äºç”¨æˆ·æŒ‡å®šçš„ç‰¹æ®Šæ•°æ®ç±»å‹ï¼Œåªè¦è¿™ä¸ªç±»å‹å®ç°äº†è¿­ä»£å™¨ï¼Œfind å‡½æ•°å°±å¯ä»¥å¤„ç†ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥åˆ›é€ å‡ºæ›´å¤šçš„æ³›å‹å‡½æ•°ï¼Œç”šè‡³æ„é€ è‡ªå·±çš„æ³›å‹å‡½æ•°åº“ã€‚é‚£æˆ‘ä»¬æ˜¯å¦‚ä½•æ¨å¯¼å‡ºæ³›å‹ T çš„çº¦æŸæ¡ä»¶å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ JavaScript ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">source, expect, filter</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> filtered = []</span><br><span class="line">    <span class="comment">// T extends Iterable&lt;E&gt;</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> source[<span class="built_in">Symbol</span>.iterator] != <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">"source must be an iterable"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// filter:(a:E, b:E)=&gt;boolean</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> filter != <span class="string">"function"</span> || (<span class="keyword">typeof</span> filter === <span class="string">"function"</span> &amp;&amp; filter.length != <span class="number">2</span>)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">"filter must be a function with a Boolean return value"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> source) &#123;</span><br><span class="line">        <span class="comment">// E</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> item === <span class="keyword">typeof</span> expect) &#123;</span><br><span class="line">            <span class="keyword">if</span>(filter(item, expect)) &#123;</span><br><span class="line">                filtered.push(item)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filtered</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹æ³›å‹ T çš„çº¦æŸå®é™…å°±æ˜¯å¯¹æ³›å‹ T æå‡ºè¦æ±‚ï¼Œæ¢ä¸€ç§è¯´æ³•å°±æ˜¯æˆ‘ä»¬åˆ¤æ–­ç±»å‹æ˜¯å¦æ»¡è¶³æŸäº›æ¡ä»¶ï¼Œè¿›è€Œå°†è¿™äº›æ¡ä»¶è½¬æ¢ä¸ºå¯¹æ³›å‹ T çš„è¦æ±‚ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>if(typeof source[Symbol.iterator] != &quot;function&quot;)</code> æ¥åˆ¤å®š source å‚æ•°æ˜¯å¦æ»¡è¶³è¿­ä»£å™¨çš„è¦æ±‚ã€‚</p>
<p>source å‚æ•°çš„è¿­ä»£å™¨è¿”å›ç±»å‹ä¸º E çš„å€¼ï¼Œå¯¹äºæ³›å‹ E æˆ‘ä»¬è¦æ±‚å®ƒå¿…é¡»èƒ½å¤Ÿæ¯”è¾ƒä¸¤ä¸ªå€¼ï¼ŒåŒ…æ‹¬ç›¸ç­‰(==)ã€å¤§äº(&gt;)ã€å°äº(&lt;)ã€å°äºç­‰äº(&lt;=)ã€å¤§äºç­‰äº(&gt;=)ç­‰æ“ä½œï¼Œå¹¶è¦æ±‚å…¶æ¯”è¾ƒæ“ä½œæ€»æ˜¯è¿”å› boolean å€¼ã€‚</p>
<p>åœ¨ find å‡½æ•°ä¸­æˆ‘ä»¬ä½¿ç”¨ filter å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œé€šè¿‡ä½¿ç”¨ filter å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä¸çš„æ•°æ®ç»“æ„æä¾›ç›¸åŒçš„ç›¸ç­‰(==)ã€å¤§äº(&gt;)ã€å°äº(&lt;)ã€å°äºç­‰äº(&lt;=)ã€å¤§äºç­‰äº(&gt;=)ç­‰æ“ä½œã€‚</p>
<p>æ¯”å¦‚åœ¨å•å‘é“¾è¡¨ä¸­çš„å…ƒç´ ä¸æ˜¯æ•°å­—ç±»å‹è€Œæ˜¯ Object ç±»å‹ï¼Œé‚£æˆ‘ä»¬å°±è¦ç»™ Object å®ç°ç›¸ç­‰(==)ã€å¤§äº(&gt;)ã€å°äº(&lt;)ã€å°äºç­‰äº(&lt;=)ã€å¤§äºç­‰äº(&gt;=)ç­‰æ“ä½œã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°çš„æ–¹å¼å®ç°ä¸Šè¿°æ“ä½œï¼Œä¹Ÿå¯å°†å…¶æŒ‚åˆ° Object åŸå‹ä¸Šã€‚è¿™é‡Œä¸¾ä¾‹è¯´æ˜ç›¸ç­‰(==)è¿ç®—ï¼Œåœ¨å®ç°ç›¸ç­‰å…ƒç®—å‰è¦å…ˆè®²æ˜ä¸¤ä¸ªå¯¹è±¡æ»¡è¶³ä»€ä¹ˆæ¡ä»¶æ‰å¯å«åšç›¸ç­‰ï¼Œè¿™é‡Œæˆ‘ä»¬çº¦å®šå¯¹è±¡ a.key==b.key ï¼Œä¸” keyçš„ä¸ªæ•°ç›¸ç­‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eq</span>(<span class="params">a:any, b:any</span>):<span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">Object</span>.keys(a) === <span class="built_in">Object</span>.keys(b)) &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> a) &#123;</span><br><span class="line">          <span class="keyword">if</span>(a[key] != b[key]) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Demo &#123;</span><br><span class="line">    [key:string]:any</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> list = <span class="keyword">new</span> LinkedList&lt;Demo&gt;()</span><br><span class="line">list.add(&#123;<span class="string">"a"</span>:<span class="number">1</span>&#125;)</span><br><span class="line">list.add(&#123;<span class="string">"b"</span>:<span class="number">2</span>&#125;)</span><br><span class="line">list.add(&#123;<span class="string">"c"</span>:<span class="number">3</span>&#125;)</span><br><span class="line">list.add(&#123;<span class="string">"d"</span>:<span class="number">4</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params">a:number, b:number</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> eq(a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">find&lt;LinkedList&lt;Demo&gt;,Demo&gt;(list, &#123;<span class="string">"a"</span>:<span class="number">1</span>&#125;, filter)</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ³›å‹æ˜¯å¯¹ç±»å‹è¿›è¡ŒæŠ½è±¡ï¼Œåœ¨è°ƒç”¨æ³›å‹å‡½æ•°çš„æ—¶å€™å°†å‚æ•°ç±»å‹å®ä¾‹åŒ–ã€‚å¯¹ç±»å‹è¿›è¡ŒæŠ½è±¡ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å¯¹ç±»å‹æå‡ºä¸€ç³»åˆ—è¦æ±‚ï¼Œæ¯”å¦‚ç±»å‹æ”¯æŒçš„æ“ä½œã€è¿™äº›æ“ä½œçš„è¯­ä¹‰ç­‰ã€‚å€ŸåŠ©äºæ³›å‹å’Œè¿­ä»£å™¨æˆ‘ä»¬å¯ä»¥æ‹“å¹¿ç®—æ³•æ”¯æŒçš„èŒƒå›´ã€‚</p>
<p>æœ‰äº›å‡½æ•°é‡è½½å¯ä»¥ä½¿ç”¨æ³›å‹æ›¿æ¢ï¼Œæ¯”å¦‚ä¸Šæ–‡ä¸­å‚æ•°æ•°é‡ä¸å˜ä½†æ˜¯å€¼ç±»å‹ä¸ä¸€è‡´çš„å‡½æ•°é‡è½½å¯ä»¥æ›¿æ¢ä¸ºæ³›å‹ã€‚<br>æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°é‡è½½çš„åŸºç¡€ä¸Šè¿›è¡Œæ³›å‹æ¨å¯¼ï¼Œå€Ÿæ­¤å½’çº³ç±»å‹åº”è¯¥æ»¡è¶³çš„è¦æ±‚ï¼Œå¹¶é€æ­¥å°†å„ä¸ªå…³æ³¨ç‚¹åˆ†ç¦»ã€‚</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/04/09/%E8%AE%A1%E7%AE%97%E6%80%9D%E7%BB%B4%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%8A%A8%E6%95%88%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E4%BD%93%E7%8E%B0/">è®¡ç®—æ€ç»´åœ¨å‰ç«¯åŠ¨æ•ˆå¼€å‘ä¸­çš„ä½“ç°</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-04-09T09:34:17.012Z" itemprop="datePublished">
    2020-04-09
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E8%AE%A1%E7%AE%97%E6%80%9D%E7%BB%B4/">è®¡ç®—æ€ç»´</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/JavaScript/">JavaScript</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>æˆ‘ä»¬è¦åšä¸€ä¸ªæ•°å­—æ»šåŠ¨å¢é•¿çš„åŠ¨æ•ˆï¼Œä» 0 - 3000 çš„å˜åŒ–æŒç»­ 3ç§’ã€‚æˆ‘ä»¬å¯ä»¥å°†æ­¤é—®é¢˜è½¬åŒ–ä¸ºå¹³å‡é€Ÿåº¦æ±‚å€¼çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼šä¸€è¾†æ±½è½¦ä» A åœ°å¼€å¾€ B åœ°ï¼ŒA å’Œ Bä¹‹é—´çš„è·ç¦»ä¸º 3000 ç±³ï¼Œè¿™è¾†æ±½è½¦ä» A åœ°åˆ° B åœ°è€—æ—¶ 3ä¸ªå°æ—¶ã€‚è®©æˆ‘ä»¬æ±‚ä¸€ä¸‹è¿™è¾†è½¦çš„å¹³å‡é€Ÿåº¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¹³å‡é€Ÿåº¦ &#x3D; (B - A) &#x2F; 3</span><br><span class="line">å¹³å‡é€Ÿåº¦ &#x3D; (3000) &#x2F; 3</span><br><span class="line">å¹³å‡é€Ÿåº¦ &#x3D; 1000  æ¯å°æ—¶1000ç±³</span><br></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬æŠŠé—®é¢˜åœ¨è½¬å›åˆ°æ•°å­—å¢é•¿çš„åŠ¨æ•ˆï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å‚è€ƒæ±‚æ±½è½¦å¹³å‡é€Ÿåº¦çš„æ¨¡å‹æ¥è®¡ç®—æ•°å­—å¢é•¿åŠ¨æ•ˆçš„å¢é•¿è¿‡ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¹³å‡å¢é•¿ &#x3D; ï¼ˆ3000 - 0ï¼‰&#x2F; 3</span><br><span class="line">å¹³å‡å¢é•¿ &#x3D; 1000</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å¾—å‡ºæ¯ç§’éœ€è¦å¢åŠ çš„æ•°å€¼ï¼Œæˆ‘ä»¬å‡å®šåŠ¨ç”»ä»¥æ¯ç§’ 60 å¸§æ’­æ”¾ï¼Œåˆ™è¿˜éœ€è®¡ç®—æ¯å¸§çš„å¹³å‡å¢é•¿ã€‚</p>
<pre><code>æ¯å¸§å¹³å‡å¢é•¿ = 1000 / 60
æ¯å¸§å¹³å‡å¢é•¿ = 16.666666666666668</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tick = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> endNum = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calcNum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(tick &gt; <span class="number">3</span> * <span class="number">60</span>) <span class="keyword">return</span> cancelAnimationFrame(requestAnimationFrameID)</span><br><span class="line">  endNum = <span class="number">16.666666666666668</span> * tick</span><br><span class="line">  $demo.innerHTML = endNum.toFixed(<span class="number">0</span>)</span><br><span class="line">  tick += <span class="number">1</span></span><br><span class="line">  requestAnimationFrame(calcNum)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> requestAnimationFrameID = <span class="built_in">window</span>.requestAnimationFrame(calcNum)</span><br></pre></td></tr></table></figure>

<p><a href="https://codepen.io/wanbei08/pen/pojojNm?editors=0110" target="_blank" rel="noopener">https://codepen.io/wanbei08/pen/pojojNm?editors=0110</a></p>
<p>å¥½äº†ï¼Œæ¥ä¸‹æ¥è¯¥æµ‹è¯•äº†ã€‚ğŸ¤©ï¼Œæ•°å­—å¢é•¿çš„å¥½å¿«ï¼Œé—ªçåŒçœ¼ã€‚çœ‹æ¥è¦æ”¹è¿›ä¸€ä¸‹è¿™ä¸ªæ¨¡å‹äº†ã€‚</p>
<p>è®©æˆ‘ä»¬å†æ¬¡å›åˆ°æ±½è½¦å¹³å‡é€Ÿåº¦çš„é—®é¢˜ä¸Šã€‚æ±½è½¦ä» A åˆ° Bï¼Œè€—æ—¶ 3 å°æ—¶ï¼ŒA å’Œ B è·ç¦» 3000 ç±³ã€‚é‚£æ€ä¹ˆè®¡ç®—æ±½è½¦è¡Œé©¶ 0.5 å°æ—¶åæ‰€åœ¨çš„ä½ç½®å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p &#x3D; fn(t)</span><br></pre></td></tr></table></figure>
<p>æ±½è½¦ä½ç½®æ˜¯ä¸€ä¸ªå…³äºæ—¶é—´çš„å‡½æ•°ï¼Œæ—¶é—´æ”¹å˜ï¼Œä½ç½®å‘ç”Ÿç›¸åº”çš„æ”¹å˜ã€‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„å®ç°ä¸­ä½¿ç”¨äº†æ—¶é—´å’Œé€Ÿåº¦æ¥æ±‚å¾—ä½ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p &#x3D; fn(t, v)</span><br><span class="line"></span><br><span class="line">vï¼šå¹³å‡é€Ÿåº¦</span><br></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ v æ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(B - A) &#x2F; d</span><br><span class="line"></span><br><span class="line">B - A &#x3D; c</span><br><span class="line"></span><br><span class="line">c: ç‰©ä½“ç§»åŠ¨çš„è·ç¦»</span><br><span class="line">d: æŒç»­æ—¶é—´ï¼Œè¿™é‡Œæ±½è½¦æŒç»­è¡Œé©¶ 3 ä¸ªå°æ—¶</span><br><span class="line">æ‰€ä»¥ï¼š</span><br><span class="line">v &#x3D; c &#x2F; d</span><br></pre></td></tr></table></figure>

<p>è®©æˆ‘ä»¬æ¥æ”¹ä¸€ä¸‹ä¸Šé¢æ±‚ p çš„å…¬å¼å§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p = fn(t, c)</span><br></pre></td></tr></table></figure>
<p>p å·²ç»å˜æˆäº†å…³äº t å’Œ c çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘å¯ä»¥æ±‚å¾—ä»»æ„Aã€Bä¹‹é—´çš„æŸä¸€æ—¶åˆ»çš„æ±½è½¦ä½ç½®ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p = <span class="function"><span class="keyword">function</span>(<span class="params">c, d, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> t * c/d</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç†æƒ³çš„çŠ¶æ€ä¸‹æ±½è½¦ä»¥å¹³å‡é€Ÿåº¦è¡Œé©¶ï¼Œä½†æ˜¯åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå¾ˆéš¾åšåˆ°ä¸€ç›´ä¸€ä¸ªé€Ÿåº¦å¼€è½¦ï¼Œåœ¨è·¯é€”ä¸­å¯èƒ½ä¸€ä¼šå¿«ä¸€ä¼šæ…¢ï¼Œä½†æ˜¯åˆ°è¾¾ç›®çš„åœ°æ‰€èŠ±è´¹çš„æ—¶é—´æ˜¯ä¸å˜çš„ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„é€Ÿåº¦æ˜¯ä¸€ç›´åœ¨å˜åŒ–çš„ã€‚é‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ¨¡æ‹Ÿè¿™ç§å˜é€Ÿçš„çŠ¶æ€å‘¢ï¼Ÿ</p>
<p>å…ˆè®©æˆ‘ä»¬çœ‹ä¸€é™„å›¾ï¼š</p>
<p><img src="https://img14.360buyimg.com/imagetools/jfs/t1/109940/23/11667/24402/5e8d933dEa5024b7f/24e7d56736ce166e.png" alt=""></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¹³å‡é€Ÿåº¦ä¸å˜ï¼Œåªæ˜¯æ—¶é—´çš„ä¸€ä¸ªå˜åŒ–ã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç»™æ—¶é—´ä¸€ç‚¹é­”æ³•ï¼Œä¾¿å¯ä»¥è®©æ±½è½¦çš„è¡Œè¿›æ›´åŠ ç¥å¥‡ã€‚æ­¤æ—¶çš„å‡½æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">magic = <span class="function"><span class="keyword">function</span>(<span class="params">t</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> magicT;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p = <span class="function"><span class="keyword">function</span>(<span class="params">c, d, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> c * magic(t/d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šæˆ‘ä»¬æ‰€ä½¿ç”¨çš„é­”æ³•åªèƒ½æ˜¯ 0 åˆ° 1 çš„é—­åŒºé—´å‡½æ•°ã€‚</p>
<p>é‚£æˆ‘ä»¬å›åˆ°æ•°å­—å¢é•¿çš„æ•ˆæœä¸Šæ¥å§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">magic</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.pow(t<span class="number">-1</span>, <span class="number">3</span>) + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">t, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> c * magic(t/d)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3000</span></span><br><span class="line"><span class="keyword">let</span> d = <span class="number">180</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calcNum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t &gt; d) &#123;</span><br><span class="line">        <span class="keyword">return</span> cancelAnimationFrame(requestAnimationFrameID)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> cp = p(t, c, d)</span><br><span class="line">    $demo.innerHTML = cp.toFixed(<span class="number">0</span>)</span><br><span class="line">    t += <span class="number">1</span></span><br><span class="line">    requestAnimationFrame(calcNum)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> requestAnimationFrameID = <span class="built_in">window</span>.requestAnimationFrame(calcNum)</span><br></pre></td></tr></table></figure>
<p><a href="https://codepen.io/wanbei08/pen/PoPoPjB?editors=0010" target="_blank" rel="noopener">https://codepen.io/wanbei08/pen/PoPoPjB?editors=0010</a></p>
<p>å¥½å§ï¼Œä½¿ç”¨ç¥å¥‡çš„é­”æ³•ï¼Œæ•°å­—å˜åŒ–è¿˜æ˜¯éå¸¸å¿«ã€‚å°¤å…¶æ˜¯ä¸ªä½æ•°ã€‚</p>
<p>çœ‹æ¥ä»…ä»…ä½¿ç”¨ä¸€ç§é­”æ³•æ˜¯æ§åˆ¶ä¸ä½è¿™ä¸ªæ¶é­” ğŸ‘¿çš„ã€‚åœ¨æƒ³æƒ³è¿˜èƒ½ä¸èƒ½åœ¨é­”æ³•çš„åŸºç¡€ä¸Šå¢åŠ ä¸€ç§é­”æ³•å‘¢ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p = <span class="function"><span class="keyword">function</span>(<span class="params">c, d, t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> t * c/d</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬ç›¯ç€è¿™ä¸ªå…¬å¼çœ‹ä¸€ä¼šï¼Œå†çœ‹ä¸€ä¼šã€‚æˆ‘ä»¬å›æƒ³ä¸€ä¸‹æ±½è½¦çš„è¿åŠ¨ï¼Œæ±½è½¦æ˜¯æŒç»­ä¸æ–­åœ°ç§»åŠ¨ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½æ–½åŠ ä¸€äº›é­”æ³•ï¼Œè®©å®ƒæ‹¥æœ‰ç¬ç§»çš„æœ¬é¢†å‘¢ï¼Ÿä¸ºäº†è®©æ±½è½¦å¯ä»¥ç¬ç§»ï¼Œæˆ‘ä»¬å”¯ä¸€éœ€è¦æ§åˆ¶çš„å°±æ˜¯æ±½è½¦æ‰€å¤„çš„ä½ç½®ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p = fn(t)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è®© p ä¹Ÿå˜æˆä¸€ä¸ªå…³äº t ï¼ˆæ—¶é—´ï¼‰çš„å‡½æ•°ï¼Œé€šè¿‡é€šè¿‡æ—¶é—´æ¥è®¡ç®— p æ˜¯ä¸æ˜¯éœ€è¦æ›´æ–°ã€‚</p>
<p>é‚£è®©æˆ‘ä»¬æ¥è¯•è¯•å§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">magic</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.pow(t<span class="number">-1</span>, <span class="number">3</span>) + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">t, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> c * magic(t/d)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3000</span></span><br><span class="line"><span class="keyword">let</span> d = <span class="number">180</span></span><br><span class="line"><span class="keyword">let</span> skip = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calcNum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t &gt; d) &#123;</span><br><span class="line">        <span class="keyword">return</span> cancelAnimationFrame(requestAnimationFrameID)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> cp = p(t, c, d)</span><br><span class="line">    <span class="comment">// æ¯éš” n-1 æ’­æ”¾ä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">if</span>(skip == <span class="number">4</span>) skip = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span>(skip == <span class="number">0</span>) $demo.innerHTML = cp.toFixed(<span class="number">0</span>)</span><br><span class="line">    t += <span class="number">1</span></span><br><span class="line">    skip += <span class="number">1</span></span><br><span class="line">    requestAnimationFrame(calcNum)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> requestAnimationFrameID = <span class="built_in">window</span>.requestAnimationFrame(calcNum)</span><br></pre></td></tr></table></figure>

<p><a href="https://codepen.io/wanbei08/pen/LYpYpjy?editors=0010" target="_blank" rel="noopener">https://codepen.io/wanbei08/pen/LYpYpjy?editors=0010</a></p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡è®¾ç½®æš‚åœå¸§ï¼Œæ¥é™ä½æ•°å­—å¢é•¿é¢‘ç‡ï¼Œè¿™ç§æ–¹æ³•è®¾ç½®ç®€å•ï¼ˆä¸Šé¢çš„æ–¹æ³•å¹¶æ²¡æœ‰è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼‰ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å¯ä»¥ç»™æ•°å­—å¢é•¿å‡é€Ÿäº†ï¼ŒåŒæ—¶è¿˜ä¿è¯äº†æŒç»­æ—¶é—´ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ¥æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬æ˜¯æ€æ ·ä¸€æ­¥ä¸€æ­¥çš„è®©æ•°å­—åŠ¨èµ·æ¥çš„å§ã€‚</p>
<ul>
<li>æŠŠå®é™…é—®é¢˜æŠ½è±¡ä¸ºæ•°å­¦é—®é¢˜ï¼Œå¹¶å»ºæ¨¡ã€‚è¿™é‡Œæˆ‘ä»¬æŠŠæ•°å­—å¢é•¿åŠ¨æ•ˆè¿›è¡Œäº†æŠ½è±¡ï¼Œå°†å…¶æŠ½è±¡ä¸ºä¸€ä¸ªå…³äºæ—¶é—´çš„å‡½æ•°ã€‚</li>
<li>è¿›è¡Œæ˜ å°„ï¼ŒæŠŠæ•°å­¦æ¨¡å‹ä¸­çš„å˜é‡ç­‰ç”¨ç‰¹å®šç¬¦å·ä»£æ›¿ã€‚ç”¨ç¬¦å·ä¸€ä¸€å¯¹åº”æ•°å­¦æ¨¡å‹ä¸­çš„å˜é‡å’Œè§„åˆ™ç­‰ã€‚è¿™é‡Œçš„ç¬¦å·å¯ä»¥ç†è§£ä¸ºç¨‹åºä¸­çš„å‡½æ•°ã€‚</li>
<li>é€šè¿‡ç¼–ç¨‹æŠŠè§£å†³é—®é¢˜çš„é€»è¾‘åˆ†æè¿‡ç¨‹å†™æˆç®—æ³•ï¼ŒæŠŠè§£é¢˜æ€è·¯è½¬æ¢ä¸ºè®¡ç®—æœºæŒ‡ä»¤ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å°†å‡½æ•°ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„å…·ä½“å¤„ç†é€»è¾‘å†™å‡ºæ¥ã€‚</li>
<li>è®¡ç®—æœºæ ¹æ®æŒ‡ä»¤è‡ªåŠ¨æ‰§è¡Œï¼Œæ±‚å‡ºç»“æœã€‚</li>
</ul>
<p>å»ºç«‹æ•°å­¦æ¨¡å‹çš„è¿‡ç¨‹å°±æ˜¯ç†è§£é—®é¢˜çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”è¦æŠŠæˆ‘ä»¬å¯¹é—®é¢˜çš„ç†è§£ç”¨æ•°å­¦è¯­è¨€æè¿°å‡ºæ¥ï¼Œè¿™å¾ˆå…³é”®ã€‚åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼ŒæŠ½è±¡æ˜¯æ–¹æ³•å’Œæ‰‹æ®µï¼Œè´¯ç©¿æ•´ä¸ªè¿‡ç¨‹çš„æ¯ä¸ªç¯èŠ‚ã€‚</p>

      
    </div>
</article>

    </li>
  
</ul>


            <footer>
    <div>Â© 2021 - Tigger </div>
    <div>
        <span>
            Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a href="https://github.com/nameoverflow/hexo-theme-icalm" target="_blank" rel="noopener">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/dist/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>